<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Votaci√≥n - Comit√© de Convivencia Laboral</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-emerald-50 to-teal-100 min-h-screen p-6">
    <div class="max-w-6xl mx-auto">
        <!-- FORMULARIO DE DATOS -->
        <div class="bg-white rounded-lg shadow-2xl p-8 mb-6">
            <div class="flex items-center gap-3 mb-6">
                <svg class="w-10 h-10 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                </svg>
                <h1 class="text-3xl font-bold text-gray-800">Generador de Formulario de Votaci√≥n 5-20 personas</h1>
            </div>
            
            <p class="text-gray-600 mb-8">Complete los datos de la empresa, fechas y candidatos para generar el documento de votaci√≥n.</p>

            <!-- DATOS DE LA EMPRESA -->
            <div class="bg-emerald-50 border-l-4 border-emerald-500 p-4 mb-6">
                <h2 class="font-bold text-emerald-900 text-xl mb-4">üìã Datos de la Empresa</h2>
            </div>

            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Nombre de la Empresa</label>
                    <input type="text" id="empresa" value="ZAGO DISE√ëO S.A.S." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">NIT</label>
                    <input type="text" id="nit" value="900.873.999-2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Ciudad</label>
                    <input type="text" id="ciudad" value="Santiago de Cali" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Fecha del Documento</label>
                    <input type="text" id="fechaDocumento" placeholder="Ej: 10 de diciembre de 2025" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Per√≠odo de Votaci√≥n</label>
                    <input type="text" id="periodoVotacion" placeholder="Ej: Del 10 al 13 de diciembre de 2025" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Fecha Publicaci√≥n Resultados</label>
                    <input type="text" id="fechaResultados" placeholder="Ej: 14 de diciembre de 2025" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent">
                </div>
            </div>

            <!-- SECCI√ìN DE CANDIDATOS -->
            <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6">
                <h2 class="font-bold text-blue-900 text-xl mb-2">üë• Candidatos Postulados</h2>
                <p class="text-sm text-blue-800">Agregue todos los candidatos que participar√°n en la votaci√≥n</p>
            </div>

            <div id="candidatosContainer" class="space-y-4 mb-6">
                <!-- Candidato 1 por defecto -->
                <div class="candidato-item bg-gray-50 border border-gray-300 rounded-lg p-4">
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="font-bold text-gray-700">Candidato 1</h3>
                        <button type="button" class="btn-eliminar text-red-600 hover:text-red-800 text-sm font-semibold">Eliminar</button>
                    </div>
                    <div class="grid md:grid-cols-2 gap-4">
                        <input type="text" placeholder="Nombre completo" class="candidato-nombre w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        <input type="text" placeholder="Cargo" class="candidato-cargo w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        <input type="text" placeholder="√Årea o dependencia" class="candidato-area w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        <input type="text" placeholder="Motivaci√≥n (opcional, m√°x 200 caracteres)" class="candidato-motivacion w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" maxlength="200">
                    </div>
                </div>
            </div>

            <button type="button" id="btnAgregarCandidato" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-200 mb-6 flex items-center justify-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                </svg>
                Agregar Otro Candidato
            </button>

            <!-- BOT√ìN GENERAR -->
            <button type="button" id="btnGenerar" class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-4 px-6 rounded-lg transition duration-200 flex items-center justify-center gap-2 text-lg">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Generar Documento de Votaci√≥n
            </button>
        </div>

        <!-- TEXTO GENERADO -->
        <div id="textoGenerado" class="bg-white rounded-lg shadow-2xl p-8 hidden">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                </svg>
                Documento Generado
            </h2>
            
            <div class="grid md:grid-cols-2 gap-4 mb-6">
                <button type="button" id="btnCopiar" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-200 flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                    </svg>
                    Copiar para Word
                </button>
                
                <button type="button" id="btnDescargar" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-200 flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    Descargar TXT
                </button>
            </div>

            <div class="bg-gray-50 border border-gray-200 rounded-lg p-6 max-h-96 overflow-y-auto">
                <pre id="textoFinal" class="whitespace-pre-wrap text-sm text-gray-800 font-mono"></pre>
            </div>

            <div class="mt-4 p-4 bg-green-50 border border-green-200 rounded-lg">
                <p class="text-sm text-green-800">
                    <strong>‚úÖ Listo para Word:</strong> Presiona "Copiar para Word" y luego pega en Word con <strong>Ctrl+V</strong>. El texto se pegar√° sin espacios irregulares.
                </p>
            </div>
        </div>
    </div>

    <script>
        let contadorCandidatos = 1;

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Bot√≥n agregar candidato
            document.getElementById('btnAgregarCandidato').addEventListener('click', agregarCandidato);
            
            // Bot√≥n generar
            document.getElementById('btnGenerar').addEventListener('click', generarTexto);
            
            // Bot√≥n copiar
            document.getElementById('btnCopiar').addEventListener('click', copiarTexto);
            
            // Bot√≥n descargar
            document.getElementById('btnDescargar').addEventListener('click', descargarTxt);
            
            // Botones eliminar iniciales
            configurarBotonesEliminar();
        });

        function configurarBotonesEliminar() {
            const botonesEliminar = document.querySelectorAll('.btn-eliminar');
            botonesEliminar.forEach(btn => {
                btn.removeEventListener('click', eliminarCandidato);
                btn.addEventListener('click', eliminarCandidato);
            });
        }

        function agregarCandidato() {
            contadorCandidatos++;
            const container = document.getElementById('candidatosContainer');
            const nuevoItem = document.createElement('div');
            nuevoItem.className = 'candidato-item bg-gray-50 border border-gray-300 rounded-lg p-4';
            nuevoItem.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <h3 class="font-bold text-gray-700">Candidato ${contadorCandidatos}</h3>
                    <button type="button" class="btn-eliminar text-red-600 hover:text-red-800 text-sm font-semibold">Eliminar</button>
                </div>
                <div class="grid md:grid-cols-2 gap-4">
                    <input type="text" placeholder="Nombre completo" class="candidato-nombre w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                    <input type="text" placeholder="Cargo" class="candidato-cargo w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                    <input type="text" placeholder="√Årea o dependencia" class="candidato-area w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                    <input type="text" placeholder="Motivaci√≥n (opcional, m√°x 200 caracteres)" class="candidato-motivacion w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" maxlength="200">
                </div>
            `;
            container.appendChild(nuevoItem);
            configurarBotonesEliminar();
        }

        function eliminarCandidato(event) {
            const items = document.querySelectorAll('.candidato-item');
            if (items.length > 1) {
                event.target.closest('.candidato-item').remove();
                actualizarNumerosCandidatos();
            } else {
                alert('Debe haber al menos un candidato');
            }
        }

        function actualizarNumerosCandidatos() {
            const items = document.querySelectorAll('.candidato-item');
            items.forEach((item, index) => {
                item.querySelector('h3').textContent = `Candidato ${index + 1}`;
            });
            contadorCandidatos = items.length;
        }

        function generarTexto() {
            const empresa = document.getElementById('empresa').value || 'ZAGO DISE√ëO S.A.S.';
            const nit = document.getElementById('nit').value || '900.873.999-2';
            const ciudad = document.getElementById('ciudad').value || 'Santiago de Cali';
            const fechaDocumento = document.getElementById('fechaDocumento').value;
            const periodoVotacion = document.getElementById('periodoVotacion').value;
            const fechaResultados = document.getElementById('fechaResultados').value;

            // Obtener candidatos
            const candidatos = [];
            document.querySelectorAll('.candidato-item').forEach((item, index) => {
                const nombre = item.querySelector('.candidato-nombre').value;
                const cargo = item.querySelector('.candidato-cargo').value;
                const area = item.querySelector('.candidato-area').value;
                const motivacion = item.querySelector('.candidato-motivacion').value;
                
                if (nombre && cargo && area) {
                    candidatos.push({ nombre, cargo, area, motivacion });
                }
            });

            if (candidatos.length === 0) {
                alert('Por favor, agregue al menos un candidato completo (nombre, cargo y √°rea)');
                return;
            }

            // Generar secci√≥n de candidatos
            let seccionCandidatos = '';
            candidatos.forEach((c, index) => {
                seccionCandidatos += `________________________________________

CANDIDATO ${index + 1}

‚Ä¢ Nombre: ${c.nombre}
‚Ä¢ Cargo: ${c.cargo}
‚Ä¢ √Årea/Dependencia: ${c.area}`;
                if (c.motivacion) {
                    seccionCandidatos += `
‚Ä¢ Motivaci√≥n: ${c.motivacion}`;
                }
                seccionCandidatos += '\n';
            });

            // Generar opciones de votaci√≥n
            let opcionesVotacion = '';
            candidatos.forEach((c) => {
                opcionesVotacion += `‚Ä¢ ‚òê ${c.nombre} - ${c.cargo} - ${c.area}\n`;
            });
            opcionesVotacion += '‚Ä¢ ‚òê Voto en blanco';

            const texto = `VOTACI√ìN - ELECCI√ìN DE REPRESENTANTES DE LOS TRABAJADORES ANTE EL COMIT√â DE CONVIVENCIA LABORAL

${empresa} - NIT ${nit}
${ciudad}, ${fechaDocumento}

PER√çODO DE VOTACI√ìN: ${periodoVotacion}

En ejercicio de su derecho democr√°tico a elegir sus representantes ante el Comit√© de Convivencia Laboral, los trabajadores de ${empresa} est√°n convocados a emitir su voto secreto a trav√©s del presente formulario electr√≥nico.

INSTRUCCIONES PARA VOTAR

1. Lea cuidadosamente la informaci√≥n de todos los candidatos postulados.
2. Seleccione UN SOLO candidato de su preferencia.
3. Su voto es secreto, personal e intransferible.
4. Una vez enviado el formulario, no podr√° modificar su voto.
5. Solo se contabilizar√° un voto por trabajador.
6. Cada trabajador emite un √∫nico voto; el sistema asignar√° autom√°ticamente los cargos seg√∫n los resultados.

CRITERIO DE DESIGNACI√ìN

‚Ä¢ El candidato con mayor n√∫mero de votos ser√° designado como Representante Principal de los trabajadores.
‚Ä¢ El candidato con segundo mayor n√∫mero de votos ser√° designado como Representante Suplente de los trabajadores.

CANDIDATOS POSTULADOS

A continuaci√≥n se presentan los candidatos que cumplieron con todos los requisitos establecidos en la Resoluci√≥n 3461 de 2025 para integrar el Comit√© de Convivencia Laboral:

${seccionCandidatos}
________________________________________

IMPORTANTE:

‚Ä¢ El candidato con mayor numero de votaciones hara parte del comite, el segundo con mayores votos entrara como suplente.
‚Ä¢ El empleador designar√° directamente un (1) representante principal y un (1) suplente.
‚Ä¢ El Comit√© quedar√° conformado por cuatro (4) integrantes en total, garantizando la paridad entre empleador y trabajadores.
‚Ä¢ El per√≠odo de funciones ser√° de dos (2) a√±os contados desde la comunicaci√≥n oficial de resultados.
‚Ä¢ Los resultados ser√°n publicados mediante correo electr√≥nico institucional el d√≠a ${fechaResultados}, mediante escrutinio p√∫blico que garantiza la transparencia del proceso electoral.
 
SOBRE EL COMIT√â DE CONVIVENCIA LABORAL

Recuerde que el Comit√© es un √≥rgano preventivo, orientador y conciliador que promueve ambientes laborales respetuosos, libres de acoso laboral, discriminaci√≥n y violencia basada en g√©nero. Su voto contribuye a fortalecer la convivencia y el respeto en nuestra organizaci√≥n.

________________________________________

PREGUNTAS DEL FORMULARIO - VOTACI√ìN

________________________________________

Pregunta 1: Identificaci√≥n del votante* (Obligatoria)

Nombre completo:
N√∫mero de c√©dula de ciudadan√≠a:
Correo electr√≥nico institucional:
Cargo actual:
√Årea o dependencia:

________________________________________

Pregunta 2: Declaraci√≥n de elegibilidad* (Obligatoria)

Declaro que soy trabajador activo de ${empresa} con v√≠nculo laboral vigente y que tengo derecho a participar en este proceso de votaci√≥n democr√°tica para elegir a los representantes de los trabajadores ante el Comit√© de Convivencia Laboral.

Opciones:
‚Ä¢ ‚òê S√≠, confirmo que tengo derecho a votar
‚Ä¢ ‚òê No tengo derecho a votar

________________________________________

Pregunta 3: Informaci√≥n sobre los candidatos (Informativa - Solo visible si seleccion√≥ "S√≠" en pregunta anterior)

Antes de emitir su voto, confirme que ha le√≠do la informaci√≥n de todos los candidatos postulados presentada al inicio de este formulario.

Opciones:
‚Ä¢ ‚òê S√≠, he le√≠do la informaci√≥n de todos los candidatos
‚Ä¢ ‚òê Deseo revisar nuevamente la informaci√≥n antes de votar

________________________________________

Pregunta 4: Emisi√≥n del voto* (Obligatoria - Solo visible si seleccion√≥ "S√≠" en pregunta anterior)

Seleccione el candidato de su preferencia para representar a los trabajadores ante el Comit√© de Convivencia Laboral.

IMPORTANTE: El candidato con mayor votaci√≥n ser√° el Representante Principal y el segundo en votaci√≥n ser√° el Representante Suplente. Usted solo debe seleccionar UN candidato.

Opciones (selecci√≥n √∫nica):

${opcionesVotacion}

________________________________________

Pregunta 5: Consentimiento de validaci√≥n* (Obligatoria)

Autorizo a ${empresa} para validar mi identidad como trabajador activo de la empresa y verificar que no he emitido voto duplicado, garantizando un proceso electoral transparente, democr√°tico y conforme a la normatividad vigente.

Entiendo que:
‚Ä¢ Mi voto ser√° completamente secreto
‚Ä¢ Solo se utilizar√°n mis datos de identificaci√≥n para validar mi participaci√≥n
‚Ä¢ No se revelar√° mi preferencia electoral a ninguna persona
‚Ä¢ Los datos ser√°n tratados conforme a la Ley 1581 de 2012

Opciones:
‚Ä¢ ‚òê Autorizo la validaci√≥n de mi participaci√≥n
‚Ä¢ ‚òê No autorizo`;

            document.getElementById('textoFinal').textContent = texto;
            document.getElementById('textoGenerado').classList.remove('hidden');
            
            // Scroll suave al resultado
            document.getElementById('textoGenerado').scrollIntoView({ behavior: 'smooth' });
        }

        function copiarTexto() {
            const texto = document.getElementById('textoFinal').textContent;
            navigator.clipboard.writeText(texto).then(() => {
                alert('‚úÖ Texto copiado al portapapeles. Ahora puedes pegarlo en Word con Ctrl+V');
            }).catch(err => {
                alert('Error al copiar: ' + err);
            });
        }

        function descargarTxt() {
            const texto = document.getElementById('textoFinal').textContent;
            const empresa = document.getElementById('empresa').value.replace(/\s+/g, '_');
            const blob = new Blob([texto], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Votacion_${empresa}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
